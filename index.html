<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>erik lumbela</title>
  <meta name="description" content="Art by Erik Lumbela.">
  <link rel="stylesheet" href="./styles/style.css"/>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-K22CFV6SNV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-K22CFV6SNV');
</script>
<body>
  <div class="container">
    <header>
      <div>
        <a class="reload" href="./">â†»</a>
        <a class="alternate" id="texts-toggle" onclick="toggleVisibility(event)">texts</a>
        <a class="alternate" id="visuals-toggle" onclick="toggleVisibility(event)">visuals</a>
        <a class="alternate" id="all-toggle" onclick="toggleVisibility(event)">all</a>
      </div>
      <!--<a id="still-videos-toggle" onclick="toggleVisibility(event)">still videos</a>-->
      <a id="works-of-color-toggle" onclick="toggleVisibility(event)">works of color</a>
      <a id="named-color-toggle" onclick="toggleVisibility(event)">named color</a>
      <a id="time-pieces-toggle" onclick="toggleVisibility(event)">time pieces</a>
      <a id="other-toggle" onclick="toggleVisibility(event)">other</a>
      <a id="things-that-are-toggle" onclick="toggleVisibility(event)">things that are</a>
    </header>
    <div class="masonry-with-columns">
      <div id="red-squares-004" class="work visuals all works-of-color red-squares-004">     
        <svg id="red-squares-004" version="1.1" viewBox="0 0 3840 3840" xmlns="http://www.w3.org/2000/svg">
          <g id="layer1" fill-opacity=".99746">
            <rect x="2520" width="1320" height="3840" fill="#f80202"/>
            <rect x="840" width="1680" height="3840" fill="#f50000"/>
            <rect width="840" height="3840" fill="#f90101"/>
          </g>
        </svg>
      </div>
      <div id="time-of-my-life" class="work texts all time-pieces time-of-my-life">
        <h2>time of my life</h2>
        <p id="seconds-left">...</p>
      </div>
      <div id="to-the-moon" class="work visuals all time-pieces to-the-moon">
        <svg id="moon" viewBox="0 0 100 100" >
          <rect x="0" y="0" width="100%" height="100%" fill="black"></rect>
          <circle cx="-30%" cy="50%" r="30%" fill="white">
            <animate
              attributeName="cx"
              from="-30%"
              to="130%"
              dur="5min"
              repeatCount="1"
            />
          </circle>
        </svg>
      </div>
      <div id="to-the-moon" class="work texts all time-pieces to-the-moon">
        <h2>to the moon</h2>
        <p>At a walking pace of <span id="walking-pace-in-kms">5,4</span> km's an hour. It would take me approximately <span id="moons-to-supermoon">95</span> full moons to reach the super moon (when the moon is nearest and brightest), or <span id="moons-to-eclipsed-moon">106</span> moons to reach an eclipsed moon (when the moon is most distant).</p>
        <p>This calculation assumes walking continously 24 hours each day, which is not realistic. Furthermore, the notion of walking to the moon is highly impractical and not achievable in reality.</p>
      </div>
      <div id="quetta-second" class="work texts all time-pieces quetta-second">
        <h2>quetta-second</h2>
        <p>It appears that the necessity for a "quetta" stems from the need to describe data volumes. It doesn't seem to be inherently related to time, but rather, it serves as a unit of measurement that can also be applied to other quantities.</p>
        <p>The introduction of "quetta" into the metric system took place in 2022, concurrently with the inclusion of other units like "ronna," "ronto," and "quecto."</p>
        <p>The primary reason for introducing new measurement units is to 'allow clear and unambiguous communication of measurements for many years to come' (R. Brown).</p>
      </div>
      <div id="blue" class="work visuals all named-color blue">
        <svg version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <rect id="namedColorBlue" x="0" width="100" height="100" fill="blue"/>
        </svg>
      </div>
      <div id="gold" class="work visuals all named-color gold">
        <svg version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <rect id="namedColorGold" x="0" width="100" height="100" fill="gold"/>
        </svg>
      </div>
      <div id="yellow" class="work visuals all named-color yellow">
        <svg version="1.1" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
          <rect id="namedColorYellow" x="0" width="100" height="100" fill="yellow"/>
        </svg>
      </div>
      <div id="day" class="work visuals all things-that-are day visual">
        <svg id="day" version="1.1" viewBox="0 0 591 1050">
          <rect id="air" x="0" y="0" width="591" height="1050" fill="#ddd"/>
          <rect id="bottom" x="198" y="392" width="131" height="657" fill="#ececec"/>
          <rect id="middle" x="198" y="323" width="131" height="68" fill="#80b3ff"/>
          <rect id="top" x="198" y="188" width="131" height="137" fill="#04a"/>
        </svg>
        
      </div>
    </div>
    <footer class="footer">
      <div>
        <p>
          <a href="mailto:erik@lumbela.nl">e-mail ></a>
          <a href="https://www.namedcolor.com">named color (CSS) ></a>
        </p>
      </div>
    </footer>
  </div>
</body>
<script src="./scripts/the-next-ice-age.js"></script>
<script src="./scripts/to-the-moon.js"></script>
<script src="./scripts/time-of-my-life.js"></script>
<script src="./scripts/main.js"></script>
<script>
  const series = ['works-of-color', 'named-color', 'time-pieces', 'things-that-are', 'other']
  const types = ['texts', 'visuals', 'all']

  const categories = series.concat(types)

  function checkVisibilityOf(className){
    const worksSize = document.querySelectorAll(`.${className}`).length

    let toggleId = className + '-toggle'
    let toggleElement = document.getElementById(toggleId)
    if (!toggleElement){
      console.error(`toggle with class: '${toggleId}' not found`)
      return
    }

    const hiddenWorks = document.querySelectorAll(`.${className}.hidden`).length

    if (hiddenWorks === worksSize) {
      toggleElement.classList.add('hidden')
    }

    if (hiddenWorks < worksSize){
      toggleElement.classList.remove('hidden')
    }    
  }

  function checkCategoriesVisibility(){
    categories.forEach(category => {
      checkVisibilityOf(category)
    })
  }


  function toggleVisibility(event) {
    const elementId = event.target.id
    const worksClassName = elementId.substring(0, elementId.indexOf('-toggle'))
    const elementClasses = event.target.classList;

    if (elementClasses.contains('hidden')) {
      elementClasses.remove('hidden');
      showWorksOfClass(worksClassName)
    } else {
      elementClasses.add('hidden');
      hideWorksOfClass(worksClassName)
    } 
  }

  function hideWorksOfClass(worksClassName){
    const works = document.querySelectorAll('.' + worksClassName)
    works.forEach(work => {
      work.classList.add('hidden')
    })

    checkCategoriesVisibility()
  }

  function showWorksOfClass(worksClassName){
    const works = document.querySelectorAll('.' + worksClassName)
    works.forEach(work => {
      work.classList.remove('hidden');
    }) 

    checkCategoriesVisibility()
  }

  

  function shuffleWorks() {
      const container = document.getElementsByClassName('masonry-with-columns')[0]
      const elements = container.querySelectorAll('.work')
      const elementsArray = Array.from(elements)

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          let j = Math.floor(Math.random() * (i + 1));
          let temp = array[i];
          array[i] = array[j];
          array[j] = temp;
        }
        return array;
      }

      const shuffledElements = shuffle(elementsArray);

      shuffledElements.forEach(function(element) {
        container.appendChild(element);
      });
    }

    const toHideIdOnLoad = ['texts-toggle']
    if (toHideIdOnLoad.length > 0){
      toHideIdOnLoad.forEach(id => {
        document.getElementById(id).click()
      })
    }
    
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    // show/hide works by providing category or work class
    // this requires adequate classes to be added to the div representent the work
    // hide queryparam can only be used together with show (since 'all' works are hidden when either of the params is deteced, and from this blank page it adds what to show)
    function showAndHideWorksByQueryParams(){
      const toShow = getQueryParam('show')
      const toHide = getQueryParam('hide')
      if (toShow || toHide){
        hideWorksOfClass('all')
        if (toShow){
          if (toShow.includes(',')){
            const worksToShow = toShow.split(',')
            worksToShow.forEach(work => {
              showWorksOfClass(work)
            })
          } else {
            showWorksOfClass(toShow)
          }
        }
        if (toHide){
          if (toHide.includes(',')){
            const worksToHide = toHide.split(',')
            worksToHide.forEach(work => {
              hideWorksOfClass(work)
            })
          } else {
            hideWorksOfClass(toHide)
          }
        }
      }
    }
    document.querySelectorAll('.work').forEach(work => {
      work.addEventListener('click', () => {
        if (getQueryParam('show')== work.id){
          window.location.href = './'
        } else {
          window.location.href = `${window.location.pathname}?show=${work.id}`
        }
      })
    })

    window.onload = shuffleWorks;
    showAndHideWorksByQueryParams()
</script>
</html>